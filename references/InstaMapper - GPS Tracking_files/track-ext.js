var _aa=null;var _ba=null;function _ca(v){v=v+'';if(v.length==1){return '0'+v;} else{return v;}} function start(){if(!GBrowserIsCompatible()){return;} _aa=new GMap2(document.getElementById("map"));_ba=new GPolyline([],"#ffffff",5,0.0);_aa.addControl(new GLargeMapControl());_aa.addControl(new GMenuMapTypeControl());_aa.addMapType(G_PHYSICAL_MAP);_aa.addControl(new GScaleControl());var oa=document.getElementById("type").value;if(oa=="satellite"){_aa.setMapType(G_SATELLITE_MAP);} else if(oa=='hybrid'){_aa.setMapType(G_HYBRID_MAP);} else if(oa=='terrain'){_aa.setMapType(G_PHYSICAL_MAP);} var pa=new GIcon();pa.image="icon-current.png";pa.iconSize=new GSize(32,32);pa.iconAnchor=new GPoint(16,16);var qa=document.getElementById("path").value;if(qa!=""){var ra=qa.split("|");for(i=0;i<ra.length;i++){var sa=ra[i].split(",");_ba.insertVertex(1000000,new GLatLng(parseFloat(sa[0]),parseFloat(sa[1])));} _aa.addOverlay(_ba);GEvent.addListener(_aa,"maptypechanged",updateTrailStyle);updateTrailStyle();} var ta=parseFloat(document.getElementById("lat").value);var ua=parseFloat(document.getElementById("long").value);if(ta!=0&&ua!=0){var va=new GLatLng(ta,ua);var wa=parseInt(document.getElementById("zoom").value);_aa.setCenter(va,wa);var xa=new GMarker(va,{icon:pa});_aa.addOverlay(xa);} else{var va=new GLatLng(0,0);_aa.setCenter(va,1);} var ya=parseInt(document.getElementById("ts").value);if(!isNaN(ya)){var za=new Date();za.setTime(ya*1000);var Aa=za.getFullYear()+"-"+_ca(za.getMonth()+1)+"-"+_ca(za.getDate())+" "+_ca(za.getHours())+":"+_ca(za.getMinutes())+":"+_ca(za.getSeconds());document.getElementById("time").innerHTML=Aa;}} function updateTrailStyle(){if(_aa.getCurrentMapType()==G_SATELLITE_MAP||_aa.getCurrentMapType()==G_HYBRID_MAP){_ba.setStrokeStyle({color:"#ffffa5",weight:5,opacity:0.8});} else{_ba.setStrokeStyle({color:"#0000ff",weight:5,opacity:0.33});}}